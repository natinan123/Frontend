<div class="container">

    <div class="messaging">
        <div class="inbox_msg">
            <div class="inbox_people">
                <div class="headind_srch">
                    <div class="recent_heading">
                        <h4>ล่าสุด</h4>
                    </div>
                    <div class="srch_bar">
                        <div class="stylish-input-group">
                            <input type="text" class="search-bar" placeholder="ค้นหารายชื่อ"
                                [formControl]="SearchInput" />
                            <span class="input-group-addon">
                                <button type="button" (click)="openSearch(Search)" style="cursor: pointer;"> <i
                                        class="fa fa-search" aria-hidden="true"></i> </button>
                            </span> </div>
                    </div>
                </div>
                <div class="inbox_chat">
                    <div class="chat_list active_chat" *ngFor="let u of Chatuser">
                        <div class="chat_people" (click)="onClick(u)">
                            <div class="chat_img">
                                <img src="data:image/jpg;base64,{{u.profile_pic}}" alt="sunil" />
                            </div>
                            <div class="chat_ib">
                                <h5>{{u.fname}} {{u.lname}} </h5>

                            </div>
                            <!-- <div class="chat_ib">
                                <h5>{{u.fname}} {{u.lname}} <span class="chat_date">Dec 25</span></h5>
                                <p>Test, which is a new approach to have all solutions
                                    astrology under one roof.</p>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- ! -->
            <div class="mesgs">
                <div class="msg_history">
                    <div class="incoming_msg" *ngFor="let row of chat">
                        <div class="incoming_msg_img"> <img src="data:image/jpg;base64,{{row.profile_pic}}"
                                alt="sunil" /> </div>
                        <div class="received_msg" *ngIf="row.fname != My">
                            <div class="received_withd_msg">
                                <span class="name"> {{row.fname}} {{row.lname}}</span>
                                <p>{{row.mes_text}}</p>
                                <span class="time_date"> {{row.time_stamp | date : 'short'}}</span>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="outgoing_msg">
                        <div class="sent_msg">
                            <p>Test which is a new approach to have all
                                solutions</p>
                            <span class="time_date"> 11:01 AM | June 9</span>
                        </div>
                    </div> -->

                </div>
                <div class="type_msg">
                    <div class="input_msg_write">
                        <input type="text" class="write_msg" placeholder="พิมพ์ข้อความ" [formControl]="taxtChat" />
                        <button class="msg_send_btn" type="button" (click)="postTaxtChat()"><i
                                class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #Search let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">รายชื่อการค้นหา</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <div class="chat_list active_chat" *ngFor="let i of Member">
            <div class="chat_people">
                <div class="chat_img">
                    <img src="data:image/jpg;base64,{{i.profile_pic}}" alt="sunil" />
                </div>
                <div class="chat_ib">
                    <div class="col-md">
                        <h5>{{i.fname}} {{i.lname}} <span class="name" *ngIf="i.email_id == My"> ของคุณ</span> </h5>
                        

                    </div>
                    <div class="col-md">
                        <button mat-button (click)="addChat(i)"
                            style="background-color: cadetblue;color: snow;">ติดต่อสอบถาม</button>
                    </div>
                </div>
            </div>
        </div>


        <span *ngIf="Member == ''">ไม่พบข้อมูลการค้นหา</span>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="c('Save click')">ออก</button>
    </div>
</ng-template>